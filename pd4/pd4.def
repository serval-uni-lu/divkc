BootStrap: docker
From: ubuntu:24.04

%files
    ./lib/libtbbmalloc_proxy.so /lib/
    ./lib/libhwloc.so /lib/
    ./lib/libtbb.so.12.11 /lib/
    ./lib/libtbbmalloc.so.2 /lib/
    ./lib/libhwloc.so.15 /lib/
    ./lib/libhwloc.so.15.8.1 /lib/
    ./lib/libtbbmalloc.so.2.11 /lib/
    ./lib/libtbb.so.12 /lib/
    ./lib/libhwloc.la /lib/
    ./lib/libtbb.so /lib/
    ./lib/libmtkahypar.so /lib/
    ./lib/libtbbmalloc_proxy.so.2.11 /lib/
    ./lib/libtbbmalloc_proxy.so.2 /lib/
    ./lib/libtbbmalloc.so /lib/

    ./bin/d4 /d4
    ./wrapper /wrapper

%post
    echo "setup start"
    apt-get -y update

    apt-get -y install tzdata
    apt-get -y install g++ make

    cd /wrapper
    make
    cd /

%runscript
    # /wrap 64000 18000 /unigen/build/unigen "$@"
    /wrapper/wrap 64000 18000 /d4 "$@"

